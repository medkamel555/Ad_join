2024-08-08 15:33:45,433 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 15:33:45,486 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 15:33:46,408 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 15:33:46,434 p=21 u=root n=ansible | [WARNING]: Skipping key (ip) in group (ad_server) as it is not a mapping, it is
a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:33:46,435 p=21 u=root n=ansible | [WARNING]: Skipping key (fqdn) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:33:46,435 p=21 u=root n=ansible | [WARNING]: Skipping key (user) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:33:46,435 p=21 u=root n=ansible | [WARNING]: Skipping key (pass) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:33:46,436 p=21 u=root n=ansible | [WARNING]: Skipping key (domain) in group (ad_server) as it is not a mapping,
it is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:33:46,730 p=21 u=root n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  did not find expected key

The error appears to be in '/home/ec2-user/ad_join/roles/ad_join/tasks/main.yml': line 17, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


  - name: Join system
  ^ here

2024-08-08 15:36:07,084 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 15:36:07,088 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 15:36:07,967 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 15:36:07,977 p=21 u=root n=ansible | [WARNING]: Skipping key (ip) in group (ad_server) as it is not a mapping, it is
a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:36:07,977 p=21 u=root n=ansible | [WARNING]: Skipping key (fqdn) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:36:07,977 p=21 u=root n=ansible | [WARNING]: Skipping key (user) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:36:07,978 p=21 u=root n=ansible | [WARNING]: Skipping key (pass) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:36:07,979 p=21 u=root n=ansible | [WARNING]: Skipping key (domain) in group (ad_server) as it is not a mapping,
it is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:36:08,240 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-08 15:36:08,256 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-08 15:36:08,256 p=21 u=root n=ansible | Thursday 08 August 2024  15:36:08 +0000 (0:00:00.019)       0:00:00.019 ******* 
2024-08-08 15:36:09,558 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 15:36:09,571 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-08 15:36:09,572 p=21 u=root n=ansible | Thursday 08 August 2024  15:36:09 +0000 (0:00:01.315)       0:00:01.334 ******* 
2024-08-08 15:36:14,456 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-08 15:36:19,175 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-08 15:36:23,896 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-08 15:36:28,638 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-08 15:36:33,321 p=21 u=root n=ansible | failed: [databaserver-01] (item=ddjob) => {"ansible_loop_var": "item", "changed": false, "failures": ["No package ddjob available."], "item": "ddjob", "msg": "Failed to install some of the specified packages", "rc": 1, "results": []}
2024-08-08 15:36:39,502 p=21 u=root n=ansible | changed: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-08 15:36:44,260 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-08 15:36:44,267 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-08 15:36:44,268 p=21 u=root n=ansible | databaserver-01            : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2024-08-08 15:36:44,268 p=21 u=root n=ansible | Thursday 08 August 2024  15:36:44 +0000 (0:00:34.696)       0:00:36.030 ******* 
2024-08-08 15:36:44,269 p=21 u=root n=ansible | =============================================================================== 
2024-08-08 15:36:44,269 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 34.70s
2024-08-08 15:36:44,270 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.32s
2024-08-08 15:37:22,468 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 15:37:22,472 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 15:37:23,324 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 15:37:23,334 p=21 u=root n=ansible | [WARNING]: Skipping key (ip) in group (ad_server) as it is not a mapping, it is
a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:37:23,334 p=21 u=root n=ansible | [WARNING]: Skipping key (fqdn) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:37:23,335 p=21 u=root n=ansible | [WARNING]: Skipping key (user) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:37:23,335 p=21 u=root n=ansible | [WARNING]: Skipping key (pass) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:37:23,335 p=21 u=root n=ansible | [WARNING]: Skipping key (domain) in group (ad_server) as it is not a mapping,
it is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:37:23,542 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-08 15:37:23,552 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-08 15:37:23,553 p=21 u=root n=ansible | Thursday 08 August 2024  15:37:23 +0000 (0:00:00.013)       0:00:00.013 ******* 
2024-08-08 15:37:24,808 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 15:37:24,820 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-08 15:37:24,821 p=21 u=root n=ansible | Thursday 08 August 2024  15:37:24 +0000 (0:00:01.268)       0:00:01.281 ******* 
2024-08-08 15:37:29,743 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-08 15:37:34,457 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-08 15:37:39,147 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-08 15:37:43,887 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-08 15:37:48,653 p=21 u=root n=ansible | ok: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-08 15:37:53,367 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-08 15:37:53,382 p=21 u=root n=ansible | TASK [ad_join : Checking Domain Join status] ***********************************
2024-08-08 15:37:53,390 p=21 u=root n=ansible | Thursday 08 August 2024  15:37:53 +0000 (0:00:28.569)       0:00:29.850 ******* 
2024-08-08 15:37:53,820 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 15:37:53,827 p=21 u=root n=ansible | TASK [ad_join : Join system] ***************************************************
2024-08-08 15:37:53,828 p=21 u=root n=ansible | Thursday 08 August 2024  15:37:53 +0000 (0:00:00.438)       0:00:30.288 ******* 
2024-08-08 15:37:55,489 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-08 15:37:55,496 p=21 u=root n=ansible | TASK [ad_join : Allow User Login without FQDN] *********************************
2024-08-08 15:37:55,497 p=21 u=root n=ansible | Thursday 08 August 2024  15:37:55 +0000 (0:00:01.668)       0:00:31.957 ******* 
2024-08-08 15:37:55,898 p=21 u=root n=ansible | changed: [databaserver-01] => (item={'search': 'use_fully_qualified_names', 'replace': 'use_fully_qualified_names = False'})
2024-08-08 15:37:56,145 p=21 u=root n=ansible | changed: [databaserver-01] => (item={'search': 'fallback_homedir', 'replace': 'fallback_homedir = /home/%u'})
2024-08-08 15:37:56,154 p=21 u=root n=ansible | TASK [ad_join : To permit a user access via SSH and console] *******************
2024-08-08 15:37:56,154 p=21 u=root n=ansible | Thursday 08 August 2024  15:37:56 +0000 (0:00:00.657)       0:00:32.614 ******* 
2024-08-08 15:37:56,594 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 15:37:56,601 p=21 u=root n=ansible | TASK [ad_join : Allow Password Auth for all users except root] *****************
2024-08-08 15:37:56,601 p=21 u=root n=ansible | Thursday 08 August 2024  15:37:56 +0000 (0:00:00.446)       0:00:33.061 ******* 
2024-08-08 15:37:56,850 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 15:37:56,857 p=21 u=root n=ansible | TASK [ad_join : Updating sudors for Domain Admins users] ***********************
2024-08-08 15:37:56,858 p=21 u=root n=ansible | Thursday 08 August 2024  15:37:56 +0000 (0:00:00.256)       0:00:33.318 ******* 
2024-08-08 15:37:57,122 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-08 15:37:57,133 p=21 u=root n=ansible | RUNNING HANDLER [ad_join : restart sssd] ***************************************
2024-08-08 15:37:57,134 p=21 u=root n=ansible | Thursday 08 August 2024  15:37:57 +0000 (0:00:00.276)       0:00:33.594 ******* 
2024-08-08 15:37:57,999 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-08 15:37:58,008 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-08 15:37:58,008 p=21 u=root n=ansible | databaserver-01            : ok=9    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2024-08-08 15:37:58,008 p=21 u=root n=ansible | Thursday 08 August 2024  15:37:58 +0000 (0:00:00.874)       0:00:34.468 ******* 
2024-08-08 15:37:58,009 p=21 u=root n=ansible | =============================================================================== 
2024-08-08 15:37:58,010 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 28.57s
2024-08-08 15:37:58,010 p=21 u=root n=ansible | ad_join : Join system --------------------------------------------------- 1.67s
2024-08-08 15:37:58,011 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.27s
2024-08-08 15:37:58,011 p=21 u=root n=ansible | ad_join : restart sssd -------------------------------------------------- 0.88s
2024-08-08 15:37:58,012 p=21 u=root n=ansible | ad_join : Allow User Login without FQDN --------------------------------- 0.66s
2024-08-08 15:37:58,012 p=21 u=root n=ansible | ad_join : To permit a user access via SSH and console ------------------- 0.45s
2024-08-08 15:37:58,013 p=21 u=root n=ansible | ad_join : Checking Domain Join status ----------------------------------- 0.44s
2024-08-08 15:37:58,013 p=21 u=root n=ansible | ad_join : Updating sudors for Domain Admins users ----------------------- 0.28s
2024-08-08 15:37:58,014 p=21 u=root n=ansible | ad_join : Allow Password Auth for all users except root ----------------- 0.26s
2024-08-08 15:55:37,649 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 15:55:37,656 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 15:55:39,009 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 15:55:39,022 p=21 u=root n=ansible | [WARNING]: Skipping key (ip) in group (ad_server) as it is not a mapping, it is
a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:55:39,023 p=21 u=root n=ansible | [WARNING]: Skipping key (fqdn) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:55:39,023 p=21 u=root n=ansible | [WARNING]: Skipping key (user) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:55:39,023 p=21 u=root n=ansible | [WARNING]: Skipping key (pass) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:55:39,024 p=21 u=root n=ansible | [WARNING]: Skipping key (domain) in group (ad_server) as it is not a mapping,
it is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 15:55:39,260 p=21 u=root n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  did not find expected '-' indicator

The error appears to be in '/home/ec2-user/ad_join/roles/ad_join/tasks/main.yml': line 23, column 2, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


 - name: Display success message
 ^ here

2024-08-08 16:02:52,751 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:02:52,755 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 16:02:53,611 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:02:53,623 p=21 u=root n=ansible | [WARNING]: Skipping key (ip) in group (ad_server) as it is not a mapping, it is
a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:02:53,623 p=21 u=root n=ansible | [WARNING]: Skipping key (fqdn) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:02:53,623 p=21 u=root n=ansible | [WARNING]: Skipping key (user) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:02:53,623 p=21 u=root n=ansible | [WARNING]: Skipping key (pass) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:02:53,624 p=21 u=root n=ansible | [WARNING]: Skipping key (domain) in group (ad_server) as it is not a mapping,
it is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:02:53,774 p=21 u=root n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  did not find expected '-' indicator

The error appears to be in '/home/ec2-user/ad_join/roles/ad_join/tasks/main.yml': line 34, column 2, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


 - name: Edit SSSD configuration file
 ^ here

2024-08-08 16:03:21,441 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:03:21,445 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 16:03:22,312 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:03:22,322 p=21 u=root n=ansible | [WARNING]: Skipping key (ip) in group (ad_server) as it is not a mapping, it is
a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:03:22,323 p=21 u=root n=ansible | [WARNING]: Skipping key (fqdn) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:03:22,323 p=21 u=root n=ansible | [WARNING]: Skipping key (user) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:03:22,323 p=21 u=root n=ansible | [WARNING]: Skipping key (pass) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:03:22,324 p=21 u=root n=ansible | [WARNING]: Skipping key (domain) in group (ad_server) as it is not a mapping,
it is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:03:22,530 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-08 16:03:22,540 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-08 16:03:22,541 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:22 +0000 (0:00:00.013)       0:00:00.013 ******* 
2024-08-08 16:03:23,833 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:03:23,847 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-08 16:03:23,848 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:23 +0000 (0:00:01.307)       0:00:01.321 ******* 
2024-08-08 16:03:28,730 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-08 16:03:33,420 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-08 16:03:38,127 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-08 16:03:42,797 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-08 16:03:47,477 p=21 u=root n=ansible | ok: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-08 16:03:52,179 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-08 16:03:52,190 p=21 u=root n=ansible | TASK [ad_join : Checking Domain Join status] ***********************************
2024-08-08 16:03:52,191 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:52 +0000 (0:00:28.342)       0:00:29.663 ******* 
2024-08-08 16:03:52,609 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:03:52,616 p=21 u=root n=ansible | TASK [ad_join : Join system] ***************************************************
2024-08-08 16:03:52,616 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:52 +0000 (0:00:00.425)       0:00:30.089 ******* 
2024-08-08 16:03:52,886 p=21 u=root n=ansible | fatal: [databaserver-01]: FAILED! => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}
2024-08-08 16:03:52,886 p=21 u=root n=ansible | ...ignoring
2024-08-08 16:03:52,893 p=21 u=root n=ansible | TASK [ad_join : Display success message] ***************************************
2024-08-08 16:03:52,894 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:52 +0000 (0:00:00.277)       0:00:30.367 ******* 
2024-08-08 16:03:52,909 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-08 16:03:52,915 p=21 u=root n=ansible | TASK [ad_join : Display error message] *****************************************
2024-08-08 16:03:52,916 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:52 +0000 (0:00:00.021)       0:00:30.389 ******* 
2024-08-08 16:03:52,933 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": "Join failed or already joined"
}
2024-08-08 16:03:52,939 p=21 u=root n=ansible | TASK [ad_join : Modify access_provider line] ***********************************
2024-08-08 16:03:52,940 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:52 +0000 (0:00:00.023)       0:00:30.413 ******* 
2024-08-08 16:03:53,309 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:03:53,316 p=21 u=root n=ansible | TASK [ad_join : Add simple_allow_groups line] **********************************
2024-08-08 16:03:53,317 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:53 +0000 (0:00:00.376)       0:00:30.790 ******* 
2024-08-08 16:03:53,566 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-08 16:03:53,573 p=21 u=root n=ansible | TASK [ad_join : Add use_fully_qualified_names line] ****************************
2024-08-08 16:03:53,574 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:53 +0000 (0:00:00.256)       0:00:31.046 ******* 
2024-08-08 16:03:53,822 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:03:53,829 p=21 u=root n=ansible | TASK [ad_join : Add ad_gpo_access_control line to SSSD config] *****************
2024-08-08 16:03:53,830 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:53 +0000 (0:00:00.255)       0:00:31.302 ******* 
2024-08-08 16:03:54,078 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-08 16:03:54,085 p=21 u=root n=ansible | TASK [ad_join : Allow User Login without FQDN] *********************************
2024-08-08 16:03:54,086 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:54 +0000 (0:00:00.255)       0:00:31.558 ******* 
2024-08-08 16:03:54,338 p=21 u=root n=ansible | ok: [databaserver-01] => (item={'search': 'use_fully_qualified_names', 'replace': 'use_fully_qualified_names = False'})
2024-08-08 16:03:54,573 p=21 u=root n=ansible | ok: [databaserver-01] => (item={'search': 'fallback_homedir', 'replace': 'fallback_homedir = /home/%u'})
2024-08-08 16:03:54,582 p=21 u=root n=ansible | TASK [ad_join : To permit a user access via SSH and console] *******************
2024-08-08 16:03:54,583 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:54 +0000 (0:00:00.497)       0:00:32.055 ******* 
2024-08-08 16:03:55,022 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:03:55,029 p=21 u=root n=ansible | TASK [ad_join : Allow Password Auth for all users except root] *****************
2024-08-08 16:03:55,030 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:55 +0000 (0:00:00.446)       0:00:32.502 ******* 
2024-08-08 16:03:55,283 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:03:55,289 p=21 u=root n=ansible | TASK [ad_join : Updating sudors for Domain Admins users] ***********************
2024-08-08 16:03:55,290 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:55 +0000 (0:00:00.260)       0:00:32.762 ******* 
2024-08-08 16:03:55,540 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:03:55,550 p=21 u=root n=ansible | RUNNING HANDLER [ad_join : restart sssd] ***************************************
2024-08-08 16:03:55,551 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:55 +0000 (0:00:00.261)       0:00:33.024 ******* 
2024-08-08 16:03:56,384 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-08 16:03:56,392 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-08 16:03:56,393 p=21 u=root n=ansible | databaserver-01            : ok=14   changed=4    unreachable=0    failed=0    skipped=1    rescued=0    ignored=1   
2024-08-08 16:03:56,393 p=21 u=root n=ansible | Thursday 08 August 2024  16:03:56 +0000 (0:00:00.842)       0:00:33.866 ******* 
2024-08-08 16:03:56,394 p=21 u=root n=ansible | =============================================================================== 
2024-08-08 16:03:56,394 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 28.34s
2024-08-08 16:03:56,395 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.31s
2024-08-08 16:03:56,395 p=21 u=root n=ansible | ad_join : restart sssd -------------------------------------------------- 0.84s
2024-08-08 16:03:56,396 p=21 u=root n=ansible | ad_join : Allow User Login without FQDN --------------------------------- 0.50s
2024-08-08 16:03:56,396 p=21 u=root n=ansible | ad_join : To permit a user access via SSH and console ------------------- 0.45s
2024-08-08 16:03:56,396 p=21 u=root n=ansible | ad_join : Checking Domain Join status ----------------------------------- 0.43s
2024-08-08 16:03:56,397 p=21 u=root n=ansible | ad_join : Modify access_provider line ----------------------------------- 0.38s
2024-08-08 16:03:56,397 p=21 u=root n=ansible | ad_join : Join system --------------------------------------------------- 0.28s
2024-08-08 16:03:56,398 p=21 u=root n=ansible | ad_join : Updating sudors for Domain Admins users ----------------------- 0.26s
2024-08-08 16:03:56,398 p=21 u=root n=ansible | ad_join : Allow Password Auth for all users except root ----------------- 0.26s
2024-08-08 16:03:56,398 p=21 u=root n=ansible | ad_join : Add simple_allow_groups line ---------------------------------- 0.26s
2024-08-08 16:03:56,399 p=21 u=root n=ansible | ad_join : Add use_fully_qualified_names line ---------------------------- 0.26s
2024-08-08 16:03:56,399 p=21 u=root n=ansible | ad_join : Add ad_gpo_access_control line to SSSD config ----------------- 0.26s
2024-08-08 16:03:56,400 p=21 u=root n=ansible | ad_join : Display error message ----------------------------------------- 0.02s
2024-08-08 16:03:56,401 p=21 u=root n=ansible | ad_join : Display success message --------------------------------------- 0.02s
2024-08-08 16:05:45,194 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:05:45,198 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 16:05:46,074 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:05:46,084 p=21 u=root n=ansible | [WARNING]: Skipping key (ip) in group (ad_server) as it is not a mapping, it is
a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:05:46,084 p=21 u=root n=ansible | [WARNING]: Skipping key (fqdn) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:05:46,084 p=21 u=root n=ansible | [WARNING]: Skipping key (user) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:05:46,085 p=21 u=root n=ansible | [WARNING]: Skipping key (pass) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:05:46,085 p=21 u=root n=ansible | [WARNING]: Skipping key (domain) in group (ad_server) as it is not a mapping,
it is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:05:46,304 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-08 16:05:46,315 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-08 16:05:46,316 p=21 u=root n=ansible | Thursday 08 August 2024  16:05:46 +0000 (0:00:00.014)       0:00:00.014 ******* 
2024-08-08 16:05:47,584 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:05:47,597 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-08 16:05:47,597 p=21 u=root n=ansible | Thursday 08 August 2024  16:05:47 +0000 (0:00:01.281)       0:00:01.296 ******* 
2024-08-08 16:05:52,518 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-08 16:05:57,195 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-08 16:06:02,031 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-08 16:06:06,713 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-08 16:06:11,380 p=21 u=root n=ansible | ok: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-08 16:06:16,037 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-08 16:06:16,047 p=21 u=root n=ansible | TASK [ad_join : Checking Domain Join status] ***********************************
2024-08-08 16:06:16,048 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:16 +0000 (0:00:28.450)       0:00:29.746 ******* 
2024-08-08 16:06:16,468 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:06:16,476 p=21 u=root n=ansible | TASK [ad_join : Join system] ***************************************************
2024-08-08 16:06:16,477 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:16 +0000 (0:00:00.428)       0:00:30.175 ******* 
2024-08-08 16:06:16,748 p=21 u=root n=ansible | fatal: [databaserver-01]: FAILED! => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}
2024-08-08 16:06:16,748 p=21 u=root n=ansible | ...ignoring
2024-08-08 16:06:16,755 p=21 u=root n=ansible | TASK [ad_join : Display success message] ***************************************
2024-08-08 16:06:16,755 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:16 +0000 (0:00:00.278)       0:00:30.454 ******* 
2024-08-08 16:06:16,770 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-08 16:06:16,776 p=21 u=root n=ansible | TASK [ad_join : Display error message] *****************************************
2024-08-08 16:06:16,777 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:16 +0000 (0:00:00.021)       0:00:30.475 ******* 
2024-08-08 16:06:16,794 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": "Join failed or already joined"
}
2024-08-08 16:06:16,801 p=21 u=root n=ansible | TASK [ad_join : Modify access_provider line] ***********************************
2024-08-08 16:06:16,801 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:16 +0000 (0:00:00.024)       0:00:30.500 ******* 
2024-08-08 16:06:17,176 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:06:17,184 p=21 u=root n=ansible | TASK [ad_join : Add simple_allow_groups line] **********************************
2024-08-08 16:06:17,184 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:17 +0000 (0:00:00.383)       0:00:30.883 ******* 
2024-08-08 16:06:17,432 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:06:17,438 p=21 u=root n=ansible | TASK [ad_join : Add use_fully_qualified_names line] ****************************
2024-08-08 16:06:17,438 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:17 +0000 (0:00:00.253)       0:00:31.137 ******* 
2024-08-08 16:06:17,686 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:06:17,693 p=21 u=root n=ansible | TASK [ad_join : Add ad_gpo_access_control line to SSSD config] *****************
2024-08-08 16:06:17,694 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:17 +0000 (0:00:00.255)       0:00:31.392 ******* 
2024-08-08 16:06:17,941 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:06:17,947 p=21 u=root n=ansible | TASK [ad_join : Allow User Login without FQDN] *********************************
2024-08-08 16:06:17,948 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:17 +0000 (0:00:00.253)       0:00:31.646 ******* 
2024-08-08 16:06:18,208 p=21 u=root n=ansible | ok: [databaserver-01] => (item={'search': 'use_fully_qualified_names', 'replace': 'use_fully_qualified_names = False'})
2024-08-08 16:06:18,442 p=21 u=root n=ansible | ok: [databaserver-01] => (item={'search': 'fallback_homedir', 'replace': 'fallback_homedir = /home/%u'})
2024-08-08 16:06:18,450 p=21 u=root n=ansible | TASK [ad_join : To permit a user access via SSH and console] *******************
2024-08-08 16:06:18,450 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:18 +0000 (0:00:00.502)       0:00:32.149 ******* 
2024-08-08 16:06:18,890 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:06:18,897 p=21 u=root n=ansible | TASK [ad_join : Allow Password Auth for all users except root] *****************
2024-08-08 16:06:18,898 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:18 +0000 (0:00:00.447)       0:00:32.596 ******* 
2024-08-08 16:06:19,149 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:06:19,156 p=21 u=root n=ansible | TASK [ad_join : Updating sudors for Domain Admins users] ***********************
2024-08-08 16:06:19,156 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:19 +0000 (0:00:00.258)       0:00:32.855 ******* 
2024-08-08 16:06:19,402 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:06:19,418 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-08 16:06:19,418 p=21 u=root n=ansible | databaserver-01            : ok=13   changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=1   
2024-08-08 16:06:19,419 p=21 u=root n=ansible | Thursday 08 August 2024  16:06:19 +0000 (0:00:00.262)       0:00:33.117 ******* 
2024-08-08 16:06:19,420 p=21 u=root n=ansible | =============================================================================== 
2024-08-08 16:06:19,421 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 28.45s
2024-08-08 16:06:19,421 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.28s
2024-08-08 16:06:19,422 p=21 u=root n=ansible | ad_join : Allow User Login without FQDN --------------------------------- 0.50s
2024-08-08 16:06:19,422 p=21 u=root n=ansible | ad_join : To permit a user access via SSH and console ------------------- 0.45s
2024-08-08 16:06:19,423 p=21 u=root n=ansible | ad_join : Checking Domain Join status ----------------------------------- 0.43s
2024-08-08 16:06:19,424 p=21 u=root n=ansible | ad_join : Modify access_provider line ----------------------------------- 0.38s
2024-08-08 16:06:19,424 p=21 u=root n=ansible | ad_join : Join system --------------------------------------------------- 0.28s
2024-08-08 16:06:19,425 p=21 u=root n=ansible | ad_join : Updating sudors for Domain Admins users ----------------------- 0.26s
2024-08-08 16:06:19,425 p=21 u=root n=ansible | ad_join : Allow Password Auth for all users except root ----------------- 0.26s
2024-08-08 16:06:19,426 p=21 u=root n=ansible | ad_join : Add use_fully_qualified_names line ---------------------------- 0.26s
2024-08-08 16:06:19,427 p=21 u=root n=ansible | ad_join : Add simple_allow_groups line ---------------------------------- 0.25s
2024-08-08 16:06:19,427 p=21 u=root n=ansible | ad_join : Add ad_gpo_access_control line to SSSD config ----------------- 0.25s
2024-08-08 16:06:19,428 p=21 u=root n=ansible | ad_join : Display error message ----------------------------------------- 0.02s
2024-08-08 16:06:19,428 p=21 u=root n=ansible | ad_join : Display success message --------------------------------------- 0.02s
2024-08-08 16:08:02,900 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:08:02,904 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 16:08:03,788 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:08:03,799 p=21 u=root n=ansible | [WARNING]: Skipping key (ip) in group (ad_server) as it is not a mapping, it is
a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:08:03,799 p=21 u=root n=ansible | [WARNING]: Skipping key (fqdn) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:08:03,800 p=21 u=root n=ansible | [WARNING]: Skipping key (user) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:08:03,800 p=21 u=root n=ansible | [WARNING]: Skipping key (pass) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:08:03,800 p=21 u=root n=ansible | [WARNING]: Skipping key (domain) in group (ad_server) as it is not a mapping,
it is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:08:04,013 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-08 16:08:04,025 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-08 16:08:04,026 p=21 u=root n=ansible | Thursday 08 August 2024  16:08:04 +0000 (0:00:00.015)       0:00:00.015 ******* 
2024-08-08 16:08:05,293 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:08:05,305 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-08 16:08:05,306 p=21 u=root n=ansible | Thursday 08 August 2024  16:08:05 +0000 (0:00:01.280)       0:00:01.295 ******* 
2024-08-08 16:09:53,214 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:09:53,218 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 16:09:54,093 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:09:54,104 p=21 u=root n=ansible | [WARNING]: Skipping key (ip) in group (ad_server) as it is not a mapping, it is
a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:09:54,104 p=21 u=root n=ansible | [WARNING]: Skipping key (fqdn) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:09:54,105 p=21 u=root n=ansible | [WARNING]: Skipping key (user) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:09:54,105 p=21 u=root n=ansible | [WARNING]: Skipping key (pass) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:09:54,105 p=21 u=root n=ansible | [WARNING]: Skipping key (domain) in group (ad_server) as it is not a mapping,
it is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:09:54,307 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-08 16:09:54,317 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-08 16:09:54,318 p=21 u=root n=ansible | Thursday 08 August 2024  16:09:54 +0000 (0:00:00.013)       0:00:00.013 ******* 
2024-08-08 16:09:55,564 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:09:55,577 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-08 16:09:55,577 p=21 u=root n=ansible | Thursday 08 August 2024  16:09:55 +0000 (0:00:01.259)       0:00:01.272 ******* 
2024-08-08 16:10:25,009 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:10:25,013 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 16:10:25,881 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:10:25,892 p=21 u=root n=ansible | [WARNING]: Skipping key (ip) in group (ad_server) as it is not a mapping, it is
a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:10:25,892 p=21 u=root n=ansible | [WARNING]: Skipping key (fqdn) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:10:25,893 p=21 u=root n=ansible | [WARNING]: Skipping key (user) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:10:25,893 p=21 u=root n=ansible | [WARNING]: Skipping key (pass) in group (ad_server) as it is not a mapping, it
is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:10:25,893 p=21 u=root n=ansible | [WARNING]: Skipping key (domain) in group (ad_server) as it is not a mapping,
it is a <class 'ansible.parsing.yaml.objects.AnsibleUnicode'>

2024-08-08 16:10:26,096 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-08 16:10:26,106 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-08 16:10:26,107 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:26 +0000 (0:00:00.014)       0:00:00.014 ******* 
2024-08-08 16:10:27,344 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:10:27,356 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-08 16:10:27,357 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:27 +0000 (0:00:01.249)       0:00:01.263 ******* 
2024-08-08 16:10:32,212 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-08 16:10:36,924 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-08 16:10:41,585 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-08 16:10:46,276 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-08 16:10:50,963 p=21 u=root n=ansible | ok: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-08 16:10:55,627 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-08 16:10:55,639 p=21 u=root n=ansible | TASK [ad_join : Checking Domain Join status] ***********************************
2024-08-08 16:10:55,640 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:55 +0000 (0:00:28.283)       0:00:29.546 ******* 
2024-08-08 16:10:56,054 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:10:56,062 p=21 u=root n=ansible | TASK [ad_join : Join system] ***************************************************
2024-08-08 16:10:56,062 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:56 +0000 (0:00:00.422)       0:00:29.969 ******* 
2024-08-08 16:10:56,329 p=21 u=root n=ansible | fatal: [databaserver-01]: FAILED! => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}
2024-08-08 16:10:56,329 p=21 u=root n=ansible | ...ignoring
2024-08-08 16:10:56,336 p=21 u=root n=ansible | TASK [ad_join : Display success message] ***************************************
2024-08-08 16:10:56,337 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:56 +0000 (0:00:00.274)       0:00:30.243 ******* 
2024-08-08 16:10:56,352 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-08 16:10:56,357 p=21 u=root n=ansible | TASK [ad_join : Display error message] *****************************************
2024-08-08 16:10:56,358 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:56 +0000 (0:00:00.021)       0:00:30.265 ******* 
2024-08-08 16:10:56,374 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": "Join failed or already joined"
}
2024-08-08 16:10:56,380 p=21 u=root n=ansible | TASK [ad_join : Modify access_provider line] ***********************************
2024-08-08 16:10:56,381 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:56 +0000 (0:00:00.022)       0:00:30.287 ******* 
2024-08-08 16:10:56,748 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:10:56,756 p=21 u=root n=ansible | TASK [ad_join : Add simple_allow_groups line] **********************************
2024-08-08 16:10:56,756 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:56 +0000 (0:00:00.375)       0:00:30.663 ******* 
2024-08-08 16:10:57,001 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:10:57,008 p=21 u=root n=ansible | TASK [ad_join : Add use_fully_qualified_names line] ****************************
2024-08-08 16:10:57,009 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:57 +0000 (0:00:00.252)       0:00:30.916 ******* 
2024-08-08 16:10:57,255 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:10:57,263 p=21 u=root n=ansible | TASK [ad_join : Add ad_gpo_access_control line to SSSD config] *****************
2024-08-08 16:10:57,264 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:57 +0000 (0:00:00.254)       0:00:31.170 ******* 
2024-08-08 16:10:57,510 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:10:57,518 p=21 u=root n=ansible | TASK [ad_join : Allow User Login without FQDN] *********************************
2024-08-08 16:10:57,518 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:57 +0000 (0:00:00.254)       0:00:31.425 ******* 
2024-08-08 16:10:57,781 p=21 u=root n=ansible | ok: [databaserver-01] => (item={'search': 'use_fully_qualified_names', 'replace': 'use_fully_qualified_names = False'})
2024-08-08 16:10:58,014 p=21 u=root n=ansible | ok: [databaserver-01] => (item={'search': 'fallback_homedir', 'replace': 'fallback_homedir = /home/%u'})
2024-08-08 16:10:58,023 p=21 u=root n=ansible | TASK [ad_join : To permit a user access via SSH and console] *******************
2024-08-08 16:10:58,024 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:58 +0000 (0:00:00.505)       0:00:31.930 ******* 
2024-08-08 16:10:58,459 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:10:58,471 p=21 u=root n=ansible | TASK [ad_join : Allow Password Auth for all users except root] *****************
2024-08-08 16:10:58,473 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:58 +0000 (0:00:00.448)       0:00:32.379 ******* 
2024-08-08 16:10:58,736 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:10:58,742 p=21 u=root n=ansible | TASK [ad_join : Updating sudors for Domain Admins users] ***********************
2024-08-08 16:10:58,743 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:58 +0000 (0:00:00.270)       0:00:32.649 ******* 
2024-08-08 16:10:58,995 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:10:59,011 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-08 16:10:59,012 p=21 u=root n=ansible | databaserver-01            : ok=13   changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=1   
2024-08-08 16:10:59,013 p=21 u=root n=ansible | Thursday 08 August 2024  16:10:59 +0000 (0:00:00.270)       0:00:32.919 ******* 
2024-08-08 16:10:59,014 p=21 u=root n=ansible | =============================================================================== 
2024-08-08 16:10:59,014 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 28.28s
2024-08-08 16:10:59,015 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.25s
2024-08-08 16:10:59,015 p=21 u=root n=ansible | ad_join : Allow User Login without FQDN --------------------------------- 0.51s
2024-08-08 16:10:59,016 p=21 u=root n=ansible | ad_join : To permit a user access via SSH and console ------------------- 0.45s
2024-08-08 16:10:59,017 p=21 u=root n=ansible | ad_join : Checking Domain Join status ----------------------------------- 0.42s
2024-08-08 16:10:59,018 p=21 u=root n=ansible | ad_join : Modify access_provider line ----------------------------------- 0.38s
2024-08-08 16:10:59,019 p=21 u=root n=ansible | ad_join : Join system --------------------------------------------------- 0.27s
2024-08-08 16:10:59,020 p=21 u=root n=ansible | ad_join : Updating sudors for Domain Admins users ----------------------- 0.27s
2024-08-08 16:10:59,022 p=21 u=root n=ansible | ad_join : Allow Password Auth for all users except root ----------------- 0.27s
2024-08-08 16:10:59,023 p=21 u=root n=ansible | ad_join : Add ad_gpo_access_control line to SSSD config ----------------- 0.25s
2024-08-08 16:10:59,025 p=21 u=root n=ansible | ad_join : Add use_fully_qualified_names line ---------------------------- 0.25s
2024-08-08 16:10:59,026 p=21 u=root n=ansible | ad_join : Add simple_allow_groups line ---------------------------------- 0.25s
2024-08-08 16:10:59,027 p=21 u=root n=ansible | ad_join : Display error message ----------------------------------------- 0.02s
2024-08-08 16:10:59,029 p=21 u=root n=ansible | ad_join : Display success message --------------------------------------- 0.02s
2024-08-08 16:11:56,796 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:11:56,800 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 16:11:57,662 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:11:57,674 p=21 u=root n=ansible | [WARNING]: Skipping 'ip' as this is not a valid group definition

2024-08-08 16:11:57,675 p=21 u=root n=ansible | [WARNING]: Skipping 'fqdn' as this is not a valid group definition

2024-08-08 16:11:57,675 p=21 u=root n=ansible | [WARNING]: Skipping 'user' as this is not a valid group definition

2024-08-08 16:11:57,676 p=21 u=root n=ansible | [WARNING]: Skipping 'pass' as this is not a valid group definition

2024-08-08 16:11:57,676 p=21 u=root n=ansible | [WARNING]: Skipping 'domain' as this is not a valid group definition

2024-08-08 16:11:57,883 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-08 16:11:57,894 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-08 16:11:57,895 p=21 u=root n=ansible | Thursday 08 August 2024  16:11:57 +0000 (0:00:00.014)       0:00:00.014 ******* 
2024-08-08 16:11:59,156 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:11:59,169 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-08 16:11:59,169 p=21 u=root n=ansible | Thursday 08 August 2024  16:11:59 +0000 (0:00:01.274)       0:00:01.288 ******* 
2024-08-08 16:12:04,076 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-08 16:12:08,767 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-08 16:12:13,442 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-08 16:12:18,121 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-08 16:12:22,849 p=21 u=root n=ansible | ok: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-08 16:12:27,535 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-08 16:12:27,546 p=21 u=root n=ansible | TASK [ad_join : Checking Domain Join status] ***********************************
2024-08-08 16:12:27,546 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:27 +0000 (0:00:28.376)       0:00:29.665 ******* 
2024-08-08 16:12:27,961 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:12:27,968 p=21 u=root n=ansible | TASK [ad_join : Join system] ***************************************************
2024-08-08 16:12:27,969 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:27 +0000 (0:00:00.422)       0:00:30.088 ******* 
2024-08-08 16:12:28,241 p=21 u=root n=ansible | fatal: [databaserver-01]: FAILED! => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}
2024-08-08 16:12:28,242 p=21 u=root n=ansible | ...ignoring
2024-08-08 16:12:28,248 p=21 u=root n=ansible | TASK [ad_join : Display success message] ***************************************
2024-08-08 16:12:28,249 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:28 +0000 (0:00:00.280)       0:00:30.368 ******* 
2024-08-08 16:12:28,263 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-08 16:12:28,268 p=21 u=root n=ansible | TASK [ad_join : Display error message] *****************************************
2024-08-08 16:12:28,269 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:28 +0000 (0:00:00.020)       0:00:30.388 ******* 
2024-08-08 16:12:28,286 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": "Join failed or already joined"
}
2024-08-08 16:12:28,291 p=21 u=root n=ansible | TASK [ad_join : Modify access_provider line] ***********************************
2024-08-08 16:12:28,292 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:28 +0000 (0:00:00.023)       0:00:30.411 ******* 
2024-08-08 16:12:28,663 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:12:28,670 p=21 u=root n=ansible | TASK [ad_join : Add simple_allow_groups line] **********************************
2024-08-08 16:12:28,671 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:28 +0000 (0:00:00.378)       0:00:30.790 ******* 
2024-08-08 16:12:28,919 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:12:28,926 p=21 u=root n=ansible | TASK [ad_join : Add use_fully_qualified_names line] ****************************
2024-08-08 16:12:28,926 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:28 +0000 (0:00:00.255)       0:00:31.045 ******* 
2024-08-08 16:12:29,169 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:12:29,176 p=21 u=root n=ansible | TASK [ad_join : Add ad_gpo_access_control line to SSSD config] *****************
2024-08-08 16:12:29,176 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:29 +0000 (0:00:00.250)       0:00:31.295 ******* 
2024-08-08 16:12:29,426 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:12:29,432 p=21 u=root n=ansible | TASK [ad_join : Allow User Login without FQDN] *********************************
2024-08-08 16:12:29,433 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:29 +0000 (0:00:00.256)       0:00:31.552 ******* 
2024-08-08 16:12:29,691 p=21 u=root n=ansible | ok: [databaserver-01] => (item={'search': 'use_fully_qualified_names', 'replace': 'use_fully_qualified_names = False'})
2024-08-08 16:12:29,924 p=21 u=root n=ansible | ok: [databaserver-01] => (item={'search': 'fallback_homedir', 'replace': 'fallback_homedir = /home/%u'})
2024-08-08 16:12:29,932 p=21 u=root n=ansible | TASK [ad_join : To permit a user access via SSH and console] *******************
2024-08-08 16:12:29,933 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:29 +0000 (0:00:00.499)       0:00:32.052 ******* 
2024-08-08 16:12:30,363 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:12:30,370 p=21 u=root n=ansible | TASK [ad_join : Allow Password Auth for all users except root] *****************
2024-08-08 16:12:30,370 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:30 +0000 (0:00:00.437)       0:00:32.489 ******* 
2024-08-08 16:12:30,619 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:12:30,626 p=21 u=root n=ansible | TASK [ad_join : Updating sudors for Domain Admins users] ***********************
2024-08-08 16:12:30,627 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:30 +0000 (0:00:00.256)       0:00:32.746 ******* 
2024-08-08 16:12:30,873 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:12:30,890 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-08 16:12:30,891 p=21 u=root n=ansible | databaserver-01            : ok=13   changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=1   
2024-08-08 16:12:30,891 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:30 +0000 (0:00:00.264)       0:00:33.010 ******* 
2024-08-08 16:12:30,892 p=21 u=root n=ansible | =============================================================================== 
2024-08-08 16:12:30,893 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 28.38s
2024-08-08 16:12:30,893 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.27s
2024-08-08 16:12:30,894 p=21 u=root n=ansible | ad_join : Allow User Login without FQDN --------------------------------- 0.50s
2024-08-08 16:12:30,894 p=21 u=root n=ansible | ad_join : To permit a user access via SSH and console ------------------- 0.44s
2024-08-08 16:12:30,895 p=21 u=root n=ansible | ad_join : Checking Domain Join status ----------------------------------- 0.42s
2024-08-08 16:12:30,896 p=21 u=root n=ansible | ad_join : Modify access_provider line ----------------------------------- 0.38s
2024-08-08 16:12:30,896 p=21 u=root n=ansible | ad_join : Join system --------------------------------------------------- 0.28s
2024-08-08 16:12:30,897 p=21 u=root n=ansible | ad_join : Updating sudors for Domain Admins users ----------------------- 0.27s
2024-08-08 16:12:30,898 p=21 u=root n=ansible | ad_join : Allow Password Auth for all users except root ----------------- 0.26s
2024-08-08 16:12:30,898 p=21 u=root n=ansible | ad_join : Add ad_gpo_access_control line to SSSD config ----------------- 0.26s
2024-08-08 16:12:30,899 p=21 u=root n=ansible | ad_join : Add simple_allow_groups line ---------------------------------- 0.26s
2024-08-08 16:12:30,900 p=21 u=root n=ansible | ad_join : Add use_fully_qualified_names line ---------------------------- 0.25s
2024-08-08 16:12:30,900 p=21 u=root n=ansible | ad_join : Display error message ----------------------------------------- 0.02s
2024-08-08 16:12:30,901 p=21 u=root n=ansible | ad_join : Display success message --------------------------------------- 0.02s
2024-08-08 16:12:36,167 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:12:36,171 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-08 16:12:37,036 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-08 16:12:37,244 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-08 16:12:37,254 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-08 16:12:37,255 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:37 +0000 (0:00:00.013)       0:00:00.013 ******* 
2024-08-08 16:12:38,422 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-08 16:12:38,434 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-08 16:12:38,434 p=21 u=root n=ansible | Thursday 08 August 2024  16:12:38 +0000 (0:00:01.179)       0:00:01.192 ******* 
2024-08-10 11:30:01,933 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:30:01,937 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-10 11:30:02,825 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:30:02,985 p=21 u=root n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  did not find expected key

The error appears to be in '/home/ec2-user/ad_join/roles/ad_join/tasks/main.yml': line 83, column 11, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

        paths: "/etc/yum.repos.d/"
          patterns: "*.repo"
          ^ here

2024-08-10 11:31:44,197 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:31:44,201 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-10 11:31:45,086 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:31:45,297 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-10 11:31:45,308 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-10 11:31:45,309 p=21 u=root n=ansible | Saturday 10 August 2024  11:31:45 +0000 (0:00:00.014)       0:00:00.014 ******* 
2024-08-10 11:31:46,601 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:31:46,614 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-10 11:31:46,615 p=21 u=root n=ansible | Saturday 10 August 2024  11:31:46 +0000 (0:00:01.306)       0:00:01.321 ******* 
2024-08-10 11:31:51,713 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-10 11:31:56,426 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-10 11:32:01,130 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-10 11:32:05,877 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-10 11:32:10,543 p=21 u=root n=ansible | ok: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-10 11:32:15,302 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-10 11:32:15,319 p=21 u=root n=ansible | TASK [ad_join : Checking Domain Join status] ***********************************
2024-08-10 11:32:15,319 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:15 +0000 (0:00:28.703)       0:00:30.025 ******* 
2024-08-10 11:32:15,748 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:32:15,755 p=21 u=root n=ansible | TASK [ad_join : Join system] ***************************************************
2024-08-10 11:32:15,756 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:15 +0000 (0:00:00.436)       0:00:30.462 ******* 
2024-08-10 11:32:16,028 p=21 u=root n=ansible | fatal: [databaserver-01]: FAILED! => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}
2024-08-10 11:32:16,030 p=21 u=root n=ansible | ...ignoring
2024-08-10 11:32:16,037 p=21 u=root n=ansible | TASK [ad_join : Display success message] ***************************************
2024-08-10 11:32:16,037 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:16 +0000 (0:00:00.281)       0:00:30.743 ******* 
2024-08-10 11:32:16,054 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-10 11:32:16,060 p=21 u=root n=ansible | TASK [ad_join : Display error message] *****************************************
2024-08-10 11:32:16,061 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:16 +0000 (0:00:00.023)       0:00:30.767 ******* 
2024-08-10 11:32:16,082 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": "Join failed or already joined"
}
2024-08-10 11:32:16,088 p=21 u=root n=ansible | TASK [ad_join : Modify access_provider line] ***********************************
2024-08-10 11:32:16,089 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:16 +0000 (0:00:00.028)       0:00:30.795 ******* 
2024-08-10 11:32:16,469 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:32:16,476 p=21 u=root n=ansible | TASK [ad_join : Add simple_allow_groups line] **********************************
2024-08-10 11:32:16,477 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:16 +0000 (0:00:00.387)       0:00:31.182 ******* 
2024-08-10 11:32:16,727 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:32:16,734 p=21 u=root n=ansible | TASK [ad_join : Add use_fully_qualified_names line] ****************************
2024-08-10 11:32:16,735 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:16 +0000 (0:00:00.258)       0:00:31.441 ******* 
2024-08-10 11:32:16,986 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:32:16,994 p=21 u=root n=ansible | TASK [ad_join : Add fallback_homedir] ******************************************
2024-08-10 11:32:16,994 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:16 +0000 (0:00:00.259)       0:00:31.700 ******* 
2024-08-10 11:32:17,244 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:32:17,251 p=21 u=root n=ansible | TASK [ad_join : Add ad_gpo_access_control line to SSSD config] *****************
2024-08-10 11:32:17,252 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:17 +0000 (0:00:00.257)       0:00:31.957 ******* 
2024-08-10 11:32:17,501 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:32:17,507 p=21 u=root n=ansible | TASK [ad_join : To permit a user access via SSH and console] *******************
2024-08-10 11:32:17,508 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:17 +0000 (0:00:00.255)       0:00:32.213 ******* 
2024-08-10 11:32:17,950 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-10 11:32:17,957 p=21 u=root n=ansible | TASK [ad_join : Get list of config file] ***************************************
2024-08-10 11:32:17,957 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:17 +0000 (0:00:00.449)       0:00:32.663 ******* 
2024-08-10 11:32:18,322 p=21 u=root n=ansible | [WARNING]: Skipped '/etc/sshd_config.d/' path due to this access issue:
'/etc/sshd_config.d/' is not a directory

2024-08-10 11:32:18,323 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:32:18,330 p=21 u=root n=ansible | TASK [ad_join : Override the default sshd config] ******************************
2024-08-10 11:32:18,330 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:18 +0000 (0:00:00.373)       0:00:33.036 ******* 
2024-08-10 11:32:18,576 p=21 u=root n=ansible | failed: [databaserver-01] (item=repos) => {"ansible_loop_var": "item", "changed": false, "item": "repos", "msg": "Destination repos does not exist !", "rc": 257}
2024-08-10 11:32:18,580 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-10 11:32:18,580 p=21 u=root n=ansible | databaserver-01            : ok=12   changed=2    unreachable=0    failed=1    skipped=1    rescued=0    ignored=1   
2024-08-10 11:32:18,581 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:18 +0000 (0:00:00.250)       0:00:33.287 ******* 
2024-08-10 11:32:18,582 p=21 u=root n=ansible | =============================================================================== 
2024-08-10 11:32:18,582 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 28.70s
2024-08-10 11:32:18,583 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.31s
2024-08-10 11:32:18,583 p=21 u=root n=ansible | ad_join : To permit a user access via SSH and console ------------------- 0.45s
2024-08-10 11:32:18,584 p=21 u=root n=ansible | ad_join : Checking Domain Join status ----------------------------------- 0.44s
2024-08-10 11:32:18,584 p=21 u=root n=ansible | ad_join : Modify access_provider line ----------------------------------- 0.39s
2024-08-10 11:32:18,585 p=21 u=root n=ansible | ad_join : Get list of config file --------------------------------------- 0.37s
2024-08-10 11:32:18,585 p=21 u=root n=ansible | ad_join : Join system --------------------------------------------------- 0.28s
2024-08-10 11:32:18,586 p=21 u=root n=ansible | ad_join : Add use_fully_qualified_names line ---------------------------- 0.26s
2024-08-10 11:32:18,587 p=21 u=root n=ansible | ad_join : Add simple_allow_groups line ---------------------------------- 0.26s
2024-08-10 11:32:18,587 p=21 u=root n=ansible | ad_join : Add fallback_homedir ------------------------------------------ 0.26s
2024-08-10 11:32:18,588 p=21 u=root n=ansible | ad_join : Add ad_gpo_access_control line to SSSD config ----------------- 0.26s
2024-08-10 11:32:18,588 p=21 u=root n=ansible | ad_join : Override the default sshd config ------------------------------ 0.25s
2024-08-10 11:32:18,589 p=21 u=root n=ansible | ad_join : Display error message ----------------------------------------- 0.03s
2024-08-10 11:32:18,589 p=21 u=root n=ansible | ad_join : Display success message --------------------------------------- 0.02s
2024-08-10 11:32:54,250 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:32:54,255 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-10 11:32:55,135 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:32:55,344 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-10 11:32:55,355 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-10 11:32:55,356 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:55 +0000 (0:00:00.015)       0:00:00.015 ******* 
2024-08-10 11:32:56,637 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:32:56,650 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-10 11:32:56,650 p=21 u=root n=ansible | Saturday 10 August 2024  11:32:56 +0000 (0:00:01.294)       0:00:01.309 ******* 
2024-08-10 11:33:01,675 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-10 11:33:06,363 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-10 11:33:11,067 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-10 11:33:15,783 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-10 11:33:20,568 p=21 u=root n=ansible | ok: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-10 11:33:25,270 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-10 11:33:25,281 p=21 u=root n=ansible | TASK [ad_join : Checking Domain Join status] ***********************************
2024-08-10 11:33:25,282 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:25 +0000 (0:00:28.631)       0:00:29.940 ******* 
2024-08-10 11:33:25,702 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:33:25,709 p=21 u=root n=ansible | TASK [ad_join : Join system] ***************************************************
2024-08-10 11:33:25,710 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:25 +0000 (0:00:00.428)       0:00:30.368 ******* 
2024-08-10 11:33:25,981 p=21 u=root n=ansible | fatal: [databaserver-01]: FAILED! => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}
2024-08-10 11:33:25,982 p=21 u=root n=ansible | ...ignoring
2024-08-10 11:33:25,988 p=21 u=root n=ansible | TASK [ad_join : Display success message] ***************************************
2024-08-10 11:33:25,989 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:25 +0000 (0:00:00.278)       0:00:30.647 ******* 
2024-08-10 11:33:26,004 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-10 11:33:26,010 p=21 u=root n=ansible | TASK [ad_join : Display error message] *****************************************
2024-08-10 11:33:26,011 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:26 +0000 (0:00:00.022)       0:00:30.669 ******* 
2024-08-10 11:33:26,030 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": "Join failed or already joined"
}
2024-08-10 11:33:26,037 p=21 u=root n=ansible | TASK [ad_join : Modify access_provider line] ***********************************
2024-08-10 11:33:26,037 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:26 +0000 (0:00:00.026)       0:00:30.696 ******* 
2024-08-10 11:33:26,416 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:33:26,424 p=21 u=root n=ansible | TASK [ad_join : Add simple_allow_groups line] **********************************
2024-08-10 11:33:26,425 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:26 +0000 (0:00:00.387)       0:00:31.083 ******* 
2024-08-10 11:33:26,675 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:33:26,681 p=21 u=root n=ansible | TASK [ad_join : Add use_fully_qualified_names line] ****************************
2024-08-10 11:33:26,682 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:26 +0000 (0:00:00.257)       0:00:31.340 ******* 
2024-08-10 11:33:26,937 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:33:26,944 p=21 u=root n=ansible | TASK [ad_join : Add fallback_homedir] ******************************************
2024-08-10 11:33:26,944 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:26 +0000 (0:00:00.262)       0:00:31.603 ******* 
2024-08-10 11:33:27,201 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:33:27,208 p=21 u=root n=ansible | TASK [ad_join : Add ad_gpo_access_control line to SSSD config] *****************
2024-08-10 11:33:27,208 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:27 +0000 (0:00:00.263)       0:00:31.867 ******* 
2024-08-10 11:33:27,457 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:33:27,465 p=21 u=root n=ansible | TASK [ad_join : To permit a user access via SSH and console] *******************
2024-08-10 11:33:27,465 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:27 +0000 (0:00:00.257)       0:00:32.124 ******* 
2024-08-10 11:33:27,904 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-10 11:33:27,913 p=21 u=root n=ansible | TASK [ad_join : Get list of config file] ***************************************
2024-08-10 11:33:27,914 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:27 +0000 (0:00:00.448)       0:00:32.572 ******* 
2024-08-10 11:33:28,278 p=21 u=root n=ansible | [WARNING]: Skipped '/etc/ssh/sshd_config.d/' path due to this access issue:
'/etc/ssh/sshd_config.d/' is not a directory

2024-08-10 11:33:28,280 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:33:28,287 p=21 u=root n=ansible | TASK [ad_join : Override the default sshd config] ******************************
2024-08-10 11:33:28,288 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:28 +0000 (0:00:00.373)       0:00:32.946 ******* 
2024-08-10 11:33:28,533 p=21 u=root n=ansible | failed: [databaserver-01] (item=sshd_config) => {"ansible_loop_var": "item", "changed": false, "item": "sshd_config", "msg": "Destination sshd_config does not exist !", "rc": 257}
2024-08-10 11:33:28,536 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-10 11:33:28,537 p=21 u=root n=ansible | databaserver-01            : ok=12   changed=2    unreachable=0    failed=1    skipped=1    rescued=0    ignored=1   
2024-08-10 11:33:28,537 p=21 u=root n=ansible | Saturday 10 August 2024  11:33:28 +0000 (0:00:00.249)       0:00:33.196 ******* 
2024-08-10 11:33:28,538 p=21 u=root n=ansible | =============================================================================== 
2024-08-10 11:33:28,539 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 28.63s
2024-08-10 11:33:28,539 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.29s
2024-08-10 11:33:28,540 p=21 u=root n=ansible | ad_join : To permit a user access via SSH and console ------------------- 0.45s
2024-08-10 11:33:28,540 p=21 u=root n=ansible | ad_join : Checking Domain Join status ----------------------------------- 0.43s
2024-08-10 11:33:28,541 p=21 u=root n=ansible | ad_join : Modify access_provider line ----------------------------------- 0.39s
2024-08-10 11:33:28,541 p=21 u=root n=ansible | ad_join : Get list of config file --------------------------------------- 0.37s
2024-08-10 11:33:28,542 p=21 u=root n=ansible | ad_join : Join system --------------------------------------------------- 0.28s
2024-08-10 11:33:28,542 p=21 u=root n=ansible | ad_join : Add fallback_homedir ------------------------------------------ 0.26s
2024-08-10 11:33:28,542 p=21 u=root n=ansible | ad_join : Add use_fully_qualified_names line ---------------------------- 0.26s
2024-08-10 11:33:28,543 p=21 u=root n=ansible | ad_join : Add simple_allow_groups line ---------------------------------- 0.26s
2024-08-10 11:33:28,543 p=21 u=root n=ansible | ad_join : Add ad_gpo_access_control line to SSSD config ----------------- 0.26s
2024-08-10 11:33:28,544 p=21 u=root n=ansible | ad_join : Override the default sshd config ------------------------------ 0.25s
2024-08-10 11:33:28,544 p=21 u=root n=ansible | ad_join : Display error message ----------------------------------------- 0.03s
2024-08-10 11:33:28,545 p=21 u=root n=ansible | ad_join : Display success message --------------------------------------- 0.02s
2024-08-10 11:46:13,731 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:46:13,735 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-10 11:46:14,612 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:46:14,769 p=21 u=root n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/home/ec2-user/ad_join/roles/ad_join/tasks/main.yml': line 81, column 17, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

   - name: Update the default config
      lineinfile:
                ^ here

2024-08-10 11:46:39,593 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:46:39,597 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-10 11:46:40,472 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:46:40,631 p=21 u=root n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  did not find expected '-' indicator

The error appears to be in '/home/ec2-user/ad_join/roles/ad_join/tasks/main.yml': line 88, column 5, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


    - name: Check if sshd_config.d exist
    ^ here

2024-08-10 11:47:44,743 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:47:44,747 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-10 11:47:45,618 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:47:45,829 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-10 11:47:45,840 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-10 11:47:45,841 p=21 u=root n=ansible | Saturday 10 August 2024  11:47:45 +0000 (0:00:00.014)       0:00:00.014 ******* 
2024-08-10 11:47:47,104 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:47:47,116 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-10 11:47:47,116 p=21 u=root n=ansible | Saturday 10 August 2024  11:47:47 +0000 (0:00:01.275)       0:00:01.290 ******* 
2024-08-10 11:47:52,056 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-10 11:47:56,750 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-10 11:48:01,576 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-10 11:48:06,267 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-10 11:48:10,980 p=21 u=root n=ansible | ok: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-10 11:48:15,693 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-10 11:48:15,704 p=21 u=root n=ansible | TASK [ad_join : Checking Domain Join status] ***********************************
2024-08-10 11:48:15,704 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:15 +0000 (0:00:28.587)       0:00:29.878 ******* 
2024-08-10 11:48:16,122 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:48:16,129 p=21 u=root n=ansible | TASK [ad_join : Join system] ***************************************************
2024-08-10 11:48:16,130 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:16 +0000 (0:00:00.425)       0:00:30.303 ******* 
2024-08-10 11:48:16,402 p=21 u=root n=ansible | fatal: [databaserver-01]: FAILED! => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}
2024-08-10 11:48:16,402 p=21 u=root n=ansible | ...ignoring
2024-08-10 11:48:16,409 p=21 u=root n=ansible | TASK [ad_join : Display success message] ***************************************
2024-08-10 11:48:16,409 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:16 +0000 (0:00:00.279)       0:00:30.583 ******* 
2024-08-10 11:48:16,425 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-10 11:48:16,431 p=21 u=root n=ansible | TASK [ad_join : Display error message] *****************************************
2024-08-10 11:48:16,432 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:16 +0000 (0:00:00.022)       0:00:30.606 ******* 
2024-08-10 11:48:16,450 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": "Join failed or already joined"
}
2024-08-10 11:48:16,457 p=21 u=root n=ansible | TASK [ad_join : Modify access_provider line] ***********************************
2024-08-10 11:48:16,458 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:16 +0000 (0:00:00.025)       0:00:30.631 ******* 
2024-08-10 11:48:16,834 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:48:16,841 p=21 u=root n=ansible | TASK [ad_join : Add simple_allow_groups line] **********************************
2024-08-10 11:48:16,842 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:16 +0000 (0:00:00.384)       0:00:31.016 ******* 
2024-08-10 11:48:17,090 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:48:17,096 p=21 u=root n=ansible | TASK [ad_join : Add use_fully_qualified_names line] ****************************
2024-08-10 11:48:17,097 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:17 +0000 (0:00:00.254)       0:00:31.271 ******* 
2024-08-10 11:48:17,344 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:48:17,350 p=21 u=root n=ansible | TASK [ad_join : Add fallback_homedir] ******************************************
2024-08-10 11:48:17,351 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:17 +0000 (0:00:00.254)       0:00:31.525 ******* 
2024-08-10 11:48:17,605 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:48:17,612 p=21 u=root n=ansible | TASK [ad_join : Add ad_gpo_access_control line to SSSD config] *****************
2024-08-10 11:48:17,613 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:17 +0000 (0:00:00.261)       0:00:31.787 ******* 
2024-08-10 11:48:17,872 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:48:17,878 p=21 u=root n=ansible | TASK [ad_join : To permit a user access via SSH and console] *******************
2024-08-10 11:48:17,879 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:17 +0000 (0:00:00.265)       0:00:32.052 ******* 
2024-08-10 11:48:18,331 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-10 11:48:18,337 p=21 u=root n=ansible | TASK [ad_join : Update the default config] *************************************
2024-08-10 11:48:18,338 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:18 +0000 (0:00:00.459)       0:00:32.512 ******* 
2024-08-10 11:48:18,593 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:48:18,601 p=21 u=root n=ansible | TASK [ad_join : Check if sshd_config.d exist] **********************************
2024-08-10 11:48:18,601 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:18 +0000 (0:00:00.263)       0:00:32.775 ******* 
2024-08-10 11:48:18,966 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:48:18,974 p=21 u=root n=ansible | TASK [ad_join : Get list of config file] ***************************************
2024-08-10 11:48:18,975 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:18 +0000 (0:00:00.373)       0:00:33.148 ******* 
2024-08-10 11:48:18,989 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-10 11:48:18,995 p=21 u=root n=ansible | TASK [ad_join : Override the default sshd config] ******************************
2024-08-10 11:48:18,996 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:18 +0000 (0:00:00.021)       0:00:33.169 ******* 
2024-08-10 11:48:19,012 p=21 u=root n=ansible | skipping: [databaserver-01] => (item=sshd_config) 
2024-08-10 11:48:19,019 p=21 u=root n=ansible | TASK [ad_join : Updating sudors for Domain Admins users] ***********************
2024-08-10 11:48:19,020 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:19 +0000 (0:00:00.024)       0:00:33.193 ******* 
2024-08-10 11:48:19,270 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:48:19,288 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-10 11:48:19,288 p=21 u=root n=ansible | databaserver-01            : ok=14   changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2024-08-10 11:48:19,289 p=21 u=root n=ansible | Saturday 10 August 2024  11:48:19 +0000 (0:00:00.269)       0:00:33.463 ******* 
2024-08-10 11:48:19,290 p=21 u=root n=ansible | =============================================================================== 
2024-08-10 11:48:19,290 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 28.59s
2024-08-10 11:48:19,291 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.27s
2024-08-10 11:48:19,291 p=21 u=root n=ansible | ad_join : To permit a user access via SSH and console ------------------- 0.46s
2024-08-10 11:48:19,292 p=21 u=root n=ansible | ad_join : Checking Domain Join status ----------------------------------- 0.43s
2024-08-10 11:48:19,293 p=21 u=root n=ansible | ad_join : Modify access_provider line ----------------------------------- 0.38s
2024-08-10 11:48:19,293 p=21 u=root n=ansible | ad_join : Check if sshd_config.d exist ---------------------------------- 0.37s
2024-08-10 11:48:19,294 p=21 u=root n=ansible | ad_join : Join system --------------------------------------------------- 0.28s
2024-08-10 11:48:19,295 p=21 u=root n=ansible | ad_join : Updating sudors for Domain Admins users ----------------------- 0.27s
2024-08-10 11:48:19,295 p=21 u=root n=ansible | ad_join : Add ad_gpo_access_control line to SSSD config ----------------- 0.27s
2024-08-10 11:48:19,296 p=21 u=root n=ansible | ad_join : Update the default config ------------------------------------- 0.26s
2024-08-10 11:48:19,296 p=21 u=root n=ansible | ad_join : Add fallback_homedir ------------------------------------------ 0.26s
2024-08-10 11:48:19,297 p=21 u=root n=ansible | ad_join : Add simple_allow_groups line ---------------------------------- 0.25s
2024-08-10 11:48:19,297 p=21 u=root n=ansible | ad_join : Add use_fully_qualified_names line ---------------------------- 0.25s
2024-08-10 11:48:19,298 p=21 u=root n=ansible | ad_join : Display error message ----------------------------------------- 0.03s
2024-08-10 11:48:19,298 p=21 u=root n=ansible | ad_join : Override the default sshd config ------------------------------ 0.02s
2024-08-10 11:48:19,299 p=21 u=root n=ansible | ad_join : Display success message --------------------------------------- 0.02s
2024-08-10 11:48:19,300 p=21 u=root n=ansible | ad_join : Get list of config file --------------------------------------- 0.02s
2024-08-10 11:49:52,865 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:49:52,869 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-10 11:49:53,718 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 11:49:53,932 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-10 11:49:53,944 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-10 11:49:53,944 p=21 u=root n=ansible | Saturday 10 August 2024  11:49:53 +0000 (0:00:00.014)       0:00:00.014 ******* 
2024-08-10 11:49:55,228 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:49:55,241 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-10 11:49:55,241 p=21 u=root n=ansible | Saturday 10 August 2024  11:49:55 +0000 (0:00:01.296)       0:00:01.311 ******* 
2024-08-10 11:50:00,228 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-10 11:50:04,972 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-10 11:50:09,662 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-10 11:50:14,423 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-10 11:50:19,102 p=21 u=root n=ansible | ok: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-10 11:50:23,790 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-10 11:50:23,801 p=21 u=root n=ansible | TASK [ad_join : Checking Domain Join status] ***********************************
2024-08-10 11:50:23,801 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:23 +0000 (0:00:28.560)       0:00:29.871 ******* 
2024-08-10 11:50:24,229 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:50:24,237 p=21 u=root n=ansible | TASK [ad_join : Join system] ***************************************************
2024-08-10 11:50:24,238 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:24 +0000 (0:00:00.436)       0:00:30.307 ******* 
2024-08-10 11:50:24,511 p=21 u=root n=ansible | fatal: [databaserver-01]: FAILED! => {"changed": true, "cmd": ["/bin/bash", "-c", "echo 1Ver2Sky | realm join corp.chhayder.com --user=admin "], "delta": "0:00:00.027706", "end": "2024-08-10 11:50:24.489716", "msg": "non-zero return code", "rc": 1, "start": "2024-08-10 11:50:24.462010", "stderr": "realm: Already joined to this domain\nPlease check\n    https://red.ht/support_rhel_ad \nto get help for common issues.", "stderr_lines": ["realm: Already joined to this domain", "Please check", "    https://red.ht/support_rhel_ad ", "to get help for common issues."], "stdout": "", "stdout_lines": []}
2024-08-10 11:50:24,511 p=21 u=root n=ansible | ...ignoring
2024-08-10 11:50:24,518 p=21 u=root n=ansible | TASK [ad_join : Display success message] ***************************************
2024-08-10 11:50:24,519 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:24 +0000 (0:00:00.280)       0:00:30.588 ******* 
2024-08-10 11:50:24,534 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-10 11:50:24,540 p=21 u=root n=ansible | TASK [ad_join : Display error message] *****************************************
2024-08-10 11:50:24,541 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:24 +0000 (0:00:00.022)       0:00:30.611 ******* 
2024-08-10 11:50:24,559 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": "Join failed or already joined"
}
2024-08-10 11:50:24,565 p=21 u=root n=ansible | TASK [ad_join : Modify access_provider line] ***********************************
2024-08-10 11:50:24,566 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:24 +0000 (0:00:00.025)       0:00:30.636 ******* 
2024-08-10 11:50:24,951 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:50:24,958 p=21 u=root n=ansible | TASK [ad_join : Add simple_allow_groups line] **********************************
2024-08-10 11:50:24,959 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:24 +0000 (0:00:00.392)       0:00:31.029 ******* 
2024-08-10 11:50:25,219 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:50:25,226 p=21 u=root n=ansible | TASK [ad_join : Add use_fully_qualified_names line] ****************************
2024-08-10 11:50:25,226 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:25 +0000 (0:00:00.267)       0:00:31.296 ******* 
2024-08-10 11:50:25,474 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:50:25,481 p=21 u=root n=ansible | TASK [ad_join : Add fallback_homedir] ******************************************
2024-08-10 11:50:25,482 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:25 +0000 (0:00:00.254)       0:00:31.551 ******* 
2024-08-10 11:50:25,726 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:50:25,734 p=21 u=root n=ansible | TASK [ad_join : Add ad_gpo_access_control line to SSSD config] *****************
2024-08-10 11:50:25,735 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:25 +0000 (0:00:00.252)       0:00:31.804 ******* 
2024-08-10 11:50:25,985 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:50:25,992 p=21 u=root n=ansible | TASK [ad_join : To permit a user access via SSH and console] *******************
2024-08-10 11:50:25,992 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:25 +0000 (0:00:00.257)       0:00:32.062 ******* 
2024-08-10 11:50:26,438 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-10 11:50:26,445 p=21 u=root n=ansible | TASK [ad_join : Update the default config] *************************************
2024-08-10 11:50:26,446 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:26 +0000 (0:00:00.453)       0:00:32.515 ******* 
2024-08-10 11:50:26,698 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:50:26,705 p=21 u=root n=ansible | TASK [ad_join : Check if sshd_config.d exist] **********************************
2024-08-10 11:50:26,706 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:26 +0000 (0:00:00.259)       0:00:32.775 ******* 
2024-08-10 11:50:27,063 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:50:27,071 p=21 u=root n=ansible | TASK [ad_join : Get list of config file] ***************************************
2024-08-10 11:50:27,072 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:27 +0000 (0:00:00.366)       0:00:33.141 ******* 
2024-08-10 11:50:27,086 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-10 11:50:27,092 p=21 u=root n=ansible | TASK [ad_join : Override the default sshd config] ******************************
2024-08-10 11:50:27,092 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:27 +0000 (0:00:00.020)       0:00:33.162 ******* 
2024-08-10 11:50:27,108 p=21 u=root n=ansible | skipping: [databaserver-01] => (item=sshd_config) 
2024-08-10 11:50:27,116 p=21 u=root n=ansible | TASK [ad_join : Updating sudors for Domain Admins users] ***********************
2024-08-10 11:50:27,116 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:27 +0000 (0:00:00.023)       0:00:33.186 ******* 
2024-08-10 11:50:27,365 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 11:50:27,381 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-10 11:50:27,381 p=21 u=root n=ansible | databaserver-01            : ok=14   changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2024-08-10 11:50:27,382 p=21 u=root n=ansible | Saturday 10 August 2024  11:50:27 +0000 (0:00:00.266)       0:00:33.452 ******* 
2024-08-10 11:50:27,383 p=21 u=root n=ansible | =============================================================================== 
2024-08-10 11:50:27,384 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 28.56s
2024-08-10 11:50:27,384 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.30s
2024-08-10 11:50:27,385 p=21 u=root n=ansible | ad_join : To permit a user access via SSH and console ------------------- 0.45s
2024-08-10 11:50:27,385 p=21 u=root n=ansible | ad_join : Checking Domain Join status ----------------------------------- 0.44s
2024-08-10 11:50:27,386 p=21 u=root n=ansible | ad_join : Modify access_provider line ----------------------------------- 0.39s
2024-08-10 11:50:27,386 p=21 u=root n=ansible | ad_join : Check if sshd_config.d exist ---------------------------------- 0.37s
2024-08-10 11:50:27,387 p=21 u=root n=ansible | ad_join : Join system --------------------------------------------------- 0.28s
2024-08-10 11:50:27,388 p=21 u=root n=ansible | ad_join : Add simple_allow_groups line ---------------------------------- 0.27s
2024-08-10 11:50:27,389 p=21 u=root n=ansible | ad_join : Updating sudors for Domain Admins users ----------------------- 0.27s
2024-08-10 11:50:27,389 p=21 u=root n=ansible | ad_join : Update the default config ------------------------------------- 0.26s
2024-08-10 11:50:27,390 p=21 u=root n=ansible | ad_join : Add ad_gpo_access_control line to SSSD config ----------------- 0.26s
2024-08-10 11:50:27,390 p=21 u=root n=ansible | ad_join : Add use_fully_qualified_names line ---------------------------- 0.26s
2024-08-10 11:50:27,391 p=21 u=root n=ansible | ad_join : Add fallback_homedir ------------------------------------------ 0.25s
2024-08-10 11:50:27,391 p=21 u=root n=ansible | ad_join : Display error message ----------------------------------------- 0.03s
2024-08-10 11:50:27,392 p=21 u=root n=ansible | ad_join : Override the default sshd config ------------------------------ 0.02s
2024-08-10 11:50:27,393 p=21 u=root n=ansible | ad_join : Display success message --------------------------------------- 0.02s
2024-08-10 11:50:27,393 p=21 u=root n=ansible | ad_join : Get list of config file --------------------------------------- 0.02s
2024-08-10 12:11:26,421 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 12:11:26,425 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-10 12:11:27,312 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-10 12:11:27,525 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-10 12:11:27,536 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-10 12:11:27,537 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:27 +0000 (0:00:00.014)       0:00:00.014 ******* 
2024-08-10 12:11:28,857 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 12:11:28,869 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-10 12:11:28,870 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:28 +0000 (0:00:01.333)       0:00:01.348 ******* 
2024-08-10 12:11:33,738 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-10 12:11:38,418 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-10 12:11:43,138 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-10 12:11:47,846 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-10 12:11:52,551 p=21 u=root n=ansible | ok: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-10 12:11:57,290 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-10 12:11:57,302 p=21 u=root n=ansible | TASK [ad_join : Checking Domain Join status] ***********************************
2024-08-10 12:11:57,303 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:57 +0000 (0:00:28.432)       0:00:29.780 ******* 
2024-08-10 12:11:57,728 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 12:11:57,736 p=21 u=root n=ansible | TASK [ad_join : Debug the AD status] *******************************************
2024-08-10 12:11:57,737 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:57 +0000 (0:00:00.433)       0:00:30.214 ******* 
2024-08-10 12:11:57,756 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": {
        "changed": false,
        "cmd": "/bin/bash -c \"/usr/sbin/realm discover corp.chhayder.com\"",
        "delta": "0:00:00.052278",
        "end": "2024-08-10 12:11:57.706858",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2024-08-10 12:11:57.654580",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "corp.chhayder.com\n  type: kerberos\n  realm-name: CORP.CHHAYDER.COM\n  domain-name: corp.chhayder.com\n  configured: kerberos-member\n  server-software: active-directory\n  client-software: sssd\n  required-package: oddjob\n  required-package: oddjob-mkhomedir\n  required-package: sssd\n  required-package: adcli\n  required-package: samba-common-tools\n  login-formats: %U\n  login-policy: allow-permitted-logins\n  permitted-logins: admin\n  permitted-groups: Domain Admins, Linux",
        "stdout_lines": [
            "corp.chhayder.com",
            "  type: kerberos",
            "  realm-name: CORP.CHHAYDER.COM",
            "  domain-name: corp.chhayder.com",
            "  configured: kerberos-member",
            "  server-software: active-directory",
            "  client-software: sssd",
            "  required-package: oddjob",
            "  required-package: oddjob-mkhomedir",
            "  required-package: sssd",
            "  required-package: adcli",
            "  required-package: samba-common-tools",
            "  login-formats: %U",
            "  login-policy: allow-permitted-logins",
            "  permitted-logins: admin",
            "  permitted-groups: Domain Admins, Linux"
        ]
    }
}
2024-08-10 12:11:57,764 p=21 u=root n=ansible | TASK [ad_join : Join system] ***************************************************
2024-08-10 12:11:57,764 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:57 +0000 (0:00:00.027)       0:00:30.242 ******* 
2024-08-10 12:11:58,039 p=21 u=root n=ansible | fatal: [databaserver-01]: FAILED! => {"changed": true, "cmd": ["/bin/bash", "-c", "echo 1Ver2Sky | realm join corp.chhayder.com --user=admin "], "delta": "0:00:00.028040", "end": "2024-08-10 12:11:58.017212", "msg": "non-zero return code", "rc": 1, "start": "2024-08-10 12:11:57.989172", "stderr": "realm: Already joined to this domain\nPlease check\n    https://red.ht/support_rhel_ad \nto get help for common issues.", "stderr_lines": ["realm: Already joined to this domain", "Please check", "    https://red.ht/support_rhel_ad ", "to get help for common issues."], "stdout": "", "stdout_lines": []}
2024-08-10 12:11:58,039 p=21 u=root n=ansible | ...ignoring
2024-08-10 12:11:58,047 p=21 u=root n=ansible | TASK [ad_join : Display success message] ***************************************
2024-08-10 12:11:58,047 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:58 +0000 (0:00:00.282)       0:00:30.525 ******* 
2024-08-10 12:11:58,063 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-10 12:11:58,069 p=21 u=root n=ansible | TASK [ad_join : Display error message] *****************************************
2024-08-10 12:11:58,071 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:58 +0000 (0:00:00.023)       0:00:30.548 ******* 
2024-08-10 12:11:58,091 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": "Join failed or already joined"
}
2024-08-10 12:11:58,098 p=21 u=root n=ansible | TASK [ad_join : Modify access_provider line] ***********************************
2024-08-10 12:11:58,099 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:58 +0000 (0:00:00.028)       0:00:30.576 ******* 
2024-08-10 12:11:58,471 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 12:11:58,479 p=21 u=root n=ansible | TASK [ad_join : Add simple_allow_groups line] **********************************
2024-08-10 12:11:58,480 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:58 +0000 (0:00:00.380)       0:00:30.957 ******* 
2024-08-10 12:11:58,730 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 12:11:58,738 p=21 u=root n=ansible | TASK [ad_join : Add use_fully_qualified_names line] ****************************
2024-08-10 12:11:58,739 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:58 +0000 (0:00:00.259)       0:00:31.216 ******* 
2024-08-10 12:11:58,991 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 12:11:58,999 p=21 u=root n=ansible | TASK [ad_join : Add fallback_homedir] ******************************************
2024-08-10 12:11:58,999 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:58 +0000 (0:00:00.260)       0:00:31.477 ******* 
2024-08-10 12:11:59,249 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 12:11:59,255 p=21 u=root n=ansible | TASK [ad_join : Add ad_gpo_access_control line to SSSD config] *****************
2024-08-10 12:11:59,255 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:59 +0000 (0:00:00.256)       0:00:31.733 ******* 
2024-08-10 12:11:59,503 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 12:11:59,510 p=21 u=root n=ansible | TASK [ad_join : To permit a user access via SSH and console] *******************
2024-08-10 12:11:59,511 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:59 +0000 (0:00:00.255)       0:00:31.989 ******* 
2024-08-10 12:11:59,953 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-10 12:11:59,960 p=21 u=root n=ansible | TASK [ad_join : Update the default config] *************************************
2024-08-10 12:11:59,960 p=21 u=root n=ansible | Saturday 10 August 2024  12:11:59 +0000 (0:00:00.449)       0:00:32.438 ******* 
2024-08-10 12:12:00,222 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 12:12:00,230 p=21 u=root n=ansible | TASK [ad_join : Check if sshd_config.d exist] **********************************
2024-08-10 12:12:00,231 p=21 u=root n=ansible | Saturday 10 August 2024  12:12:00 +0000 (0:00:00.270)       0:00:32.708 ******* 
2024-08-10 12:12:00,594 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 12:12:00,602 p=21 u=root n=ansible | TASK [ad_join : Get list of config file] ***************************************
2024-08-10 12:12:00,603 p=21 u=root n=ansible | Saturday 10 August 2024  12:12:00 +0000 (0:00:00.372)       0:00:33.080 ******* 
2024-08-10 12:12:00,619 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-10 12:12:00,625 p=21 u=root n=ansible | TASK [ad_join : Override the default sshd config] ******************************
2024-08-10 12:12:00,626 p=21 u=root n=ansible | Saturday 10 August 2024  12:12:00 +0000 (0:00:00.023)       0:00:33.104 ******* 
2024-08-10 12:12:00,643 p=21 u=root n=ansible | skipping: [databaserver-01] => (item=sshd_config) 
2024-08-10 12:12:00,651 p=21 u=root n=ansible | TASK [ad_join : Updating sudors for Domain Admins users] ***********************
2024-08-10 12:12:00,652 p=21 u=root n=ansible | Saturday 10 August 2024  12:12:00 +0000 (0:00:00.025)       0:00:33.130 ******* 
2024-08-10 12:12:00,901 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-10 12:12:00,919 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-10 12:12:00,919 p=21 u=root n=ansible | databaserver-01            : ok=15   changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2024-08-10 12:12:00,920 p=21 u=root n=ansible | Saturday 10 August 2024  12:12:00 +0000 (0:00:00.267)       0:00:33.397 ******* 
2024-08-10 12:12:00,920 p=21 u=root n=ansible | =============================================================================== 
2024-08-10 12:12:00,921 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 28.43s
2024-08-10 12:12:00,922 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.33s
2024-08-10 12:12:00,922 p=21 u=root n=ansible | ad_join : To permit a user access via SSH and console ------------------- 0.45s
2024-08-10 12:12:00,923 p=21 u=root n=ansible | ad_join : Checking Domain Join status ----------------------------------- 0.43s
2024-08-10 12:12:00,923 p=21 u=root n=ansible | ad_join : Modify access_provider line ----------------------------------- 0.38s
2024-08-10 12:12:00,924 p=21 u=root n=ansible | ad_join : Check if sshd_config.d exist ---------------------------------- 0.37s
2024-08-10 12:12:00,925 p=21 u=root n=ansible | ad_join : Join system --------------------------------------------------- 0.28s
2024-08-10 12:12:00,925 p=21 u=root n=ansible | ad_join : Update the default config ------------------------------------- 0.27s
2024-08-10 12:12:00,926 p=21 u=root n=ansible | ad_join : Updating sudors for Domain Admins users ----------------------- 0.27s
2024-08-10 12:12:00,927 p=21 u=root n=ansible | ad_join : Add use_fully_qualified_names line ---------------------------- 0.26s
2024-08-10 12:12:00,927 p=21 u=root n=ansible | ad_join : Add simple_allow_groups line ---------------------------------- 0.26s
2024-08-10 12:12:00,928 p=21 u=root n=ansible | ad_join : Add fallback_homedir ------------------------------------------ 0.26s
2024-08-10 12:12:00,928 p=21 u=root n=ansible | ad_join : Add ad_gpo_access_control line to SSSD config ----------------- 0.26s
2024-08-10 12:12:00,929 p=21 u=root n=ansible | ad_join : Display error message ----------------------------------------- 0.03s
2024-08-10 12:12:00,929 p=21 u=root n=ansible | ad_join : Debug the AD status ------------------------------------------- 0.03s
2024-08-10 12:12:00,930 p=21 u=root n=ansible | ad_join : Override the default sshd config ------------------------------ 0.03s
2024-08-10 12:12:00,931 p=21 u=root n=ansible | ad_join : Display success message --------------------------------------- 0.02s
2024-08-10 12:12:00,931 p=21 u=root n=ansible | ad_join : Get list of config file --------------------------------------- 0.02s
2024-08-12 16:33:57,180 p=16 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-12 16:33:57,184 p=16 u=root n=ansible | {"/usr/share/ansible/collections/ansible_collections": {"amazon.aws": {"version": "3.2.0"}, "ansible.controller": {"version": "4.2.2"}, "ansible.netcommon": {"version": "3.1.1"}, "ansible.network": {"version": "1.2.0"}, "ansible.posix": {"version": "1.3.0"}, "ansible.security": {"version": "1.0.0"}, "ansible.utils": {"version": "2.6.1"}, "ansible.windows": {"version": "1.9.0"}, "ansible.yang": {"version": "1.0.0"}, "arista.eos": {"version": "5.0.0"}, "cisco.asa": {"version": "3.0.0"}, "cisco.ios": {"version": "3.0.0"}, "cisco.iosxr": {"version": "3.0.0"}, "cisco.nxos": {"version": "3.0.0"}, "cloud.common": {"version": "2.1.1"}, "frr.frr": {"version": "2.0.0"}, "ibm.qradar": {"version": "2.0.0"}, "junipernetworks.junos": {"version": "3.0.0"}, "kubernetes.core": {"version": "2.2.3"}, "openvswitch.openvswitch": {"version": "2.1.0"}, "redhat.insights": {"version": "1.0.7"}, "redhat.openshift": {"version": "2.1.0"}, "redhat.rhv": {"version": "1.6.5"}, "redhat.satellite": {"version": "3.3.0"}, "servicenow.itsm": {"version": "1.3.3"}, "splunk.es": {"version": "2.0.0"}, "trendmicro.deepsec": {"version": "2.0.0"}, "vmware.vmware_rest": {"version": "2.1.5"}, "vyos.vyos": {"version": "3.0.0"}}}
2024-08-12 16:33:58,044 p=21 u=root n=ansible | [DEPRECATION WARNING]: [defaults]callback_whitelist option, normalizing names 
to new standard, use callbacks_enabled instead. This feature will be removed 
from ansible-core in version 2.15. Deprecation warnings can be disabled by 
setting deprecation_warnings=False in ansible.cfg.
2024-08-12 16:33:58,259 p=21 u=root n=ansible | PLAY [Ad join] *****************************************************************
2024-08-12 16:33:58,271 p=21 u=root n=ansible | TASK [Gathering Facts] *********************************************************
2024-08-12 16:33:58,272 p=21 u=root n=ansible | Monday 12 August 2024  16:33:58 +0000 (0:00:00.014)       0:00:00.014 ********* 
2024-08-12 16:33:59,537 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-12 16:33:59,550 p=21 u=root n=ansible | TASK [ad_join : Installing Required packages] **********************************
2024-08-12 16:33:59,551 p=21 u=root n=ansible | Monday 12 August 2024  16:33:59 +0000 (0:00:01.279)       0:00:01.294 ********* 
2024-08-12 16:34:04,719 p=21 u=root n=ansible | ok: [databaserver-01] => (item=realmd)
2024-08-12 16:34:09,576 p=21 u=root n=ansible | ok: [databaserver-01] => (item=sssd)
2024-08-12 16:34:14,301 p=21 u=root n=ansible | ok: [databaserver-01] => (item=samba-common-tools)
2024-08-12 16:34:18,968 p=21 u=root n=ansible | ok: [databaserver-01] => (item=krb5-workstation)
2024-08-12 16:34:23,719 p=21 u=root n=ansible | ok: [databaserver-01] => (item=oddjob-mkhomedir)
2024-08-12 16:34:28,363 p=21 u=root n=ansible | ok: [databaserver-01] => (item=adcli)
2024-08-12 16:34:28,374 p=21 u=root n=ansible | TASK [ad_join : Checking Domain Join status] ***********************************
2024-08-12 16:34:28,375 p=21 u=root n=ansible | Monday 12 August 2024  16:34:28 +0000 (0:00:28.823)       0:00:30.117 ********* 
2024-08-12 16:34:28,788 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-12 16:34:28,796 p=21 u=root n=ansible | TASK [ad_join : Debug the AD status] *******************************************
2024-08-12 16:34:28,796 p=21 u=root n=ansible | Monday 12 August 2024  16:34:28 +0000 (0:00:00.421)       0:00:30.539 ********* 
2024-08-12 16:34:28,815 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": {
        "changed": false,
        "cmd": "/bin/bash -c \"/usr/sbin/realm discover corp.chhayder.com\"",
        "delta": "0:00:00.051641",
        "end": "2024-08-12 16:34:28.766083",
        "failed": false,
        "msg": "",
        "rc": 0,
        "start": "2024-08-12 16:34:28.714442",
        "stderr": "",
        "stderr_lines": [],
        "stdout": "corp.chhayder.com\n  type: kerberos\n  realm-name: CORP.CHHAYDER.COM\n  domain-name: corp.chhayder.com\n  configured: kerberos-member\n  server-software: active-directory\n  client-software: sssd\n  required-package: oddjob\n  required-package: oddjob-mkhomedir\n  required-package: sssd\n  required-package: adcli\n  required-package: samba-common-tools\n  login-formats: %U\n  login-policy: allow-permitted-logins\n  permitted-logins: admin\n  permitted-groups: Domain Admins, Linux",
        "stdout_lines": [
            "corp.chhayder.com",
            "  type: kerberos",
            "  realm-name: CORP.CHHAYDER.COM",
            "  domain-name: corp.chhayder.com",
            "  configured: kerberos-member",
            "  server-software: active-directory",
            "  client-software: sssd",
            "  required-package: oddjob",
            "  required-package: oddjob-mkhomedir",
            "  required-package: sssd",
            "  required-package: adcli",
            "  required-package: samba-common-tools",
            "  login-formats: %U",
            "  login-policy: allow-permitted-logins",
            "  permitted-logins: admin",
            "  permitted-groups: Domain Admins, Linux"
        ]
    }
}
2024-08-12 16:34:28,824 p=21 u=root n=ansible | TASK [ad_join : Join system] ***************************************************
2024-08-12 16:34:28,825 p=21 u=root n=ansible | Monday 12 August 2024  16:34:28 +0000 (0:00:00.028)       0:00:30.567 ********* 
2024-08-12 16:34:29,099 p=21 u=root n=ansible | fatal: [databaserver-01]: FAILED! => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": true}
2024-08-12 16:34:29,100 p=21 u=root n=ansible | ...ignoring
2024-08-12 16:34:29,108 p=21 u=root n=ansible | TASK [ad_join : Display success message] ***************************************
2024-08-12 16:34:29,108 p=21 u=root n=ansible | Monday 12 August 2024  16:34:29 +0000 (0:00:00.283)       0:00:30.851 ********* 
2024-08-12 16:34:29,126 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-12 16:34:29,136 p=21 u=root n=ansible | TASK [ad_join : Display error message] *****************************************
2024-08-12 16:34:29,137 p=21 u=root n=ansible | Monday 12 August 2024  16:34:29 +0000 (0:00:00.028)       0:00:30.879 ********* 
2024-08-12 16:34:29,155 p=21 u=root n=ansible | ok: [databaserver-01] => {
    "msg": "Join failed or already joined"
}
2024-08-12 16:34:29,162 p=21 u=root n=ansible | TASK [ad_join : Modify access_provider line] ***********************************
2024-08-12 16:34:29,163 p=21 u=root n=ansible | Monday 12 August 2024  16:34:29 +0000 (0:00:00.025)       0:00:30.905 ********* 
2024-08-12 16:34:29,545 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-12 16:34:29,552 p=21 u=root n=ansible | TASK [ad_join : Add simple_allow_groups line] **********************************
2024-08-12 16:34:29,553 p=21 u=root n=ansible | Monday 12 August 2024  16:34:29 +0000 (0:00:00.390)       0:00:31.296 ********* 
2024-08-12 16:34:29,799 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-12 16:34:29,806 p=21 u=root n=ansible | TASK [ad_join : Add use_fully_qualified_names line] ****************************
2024-08-12 16:34:29,806 p=21 u=root n=ansible | Monday 12 August 2024  16:34:29 +0000 (0:00:00.253)       0:00:31.549 ********* 
2024-08-12 16:34:30,052 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-12 16:34:30,059 p=21 u=root n=ansible | TASK [ad_join : Add fallback_homedir] ******************************************
2024-08-12 16:34:30,059 p=21 u=root n=ansible | Monday 12 August 2024  16:34:30 +0000 (0:00:00.252)       0:00:31.802 ********* 
2024-08-12 16:34:30,307 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-12 16:34:30,315 p=21 u=root n=ansible | TASK [ad_join : Add ad_gpo_access_control line to SSSD config] *****************
2024-08-12 16:34:30,315 p=21 u=root n=ansible | Monday 12 August 2024  16:34:30 +0000 (0:00:00.256)       0:00:32.058 ********* 
2024-08-12 16:34:30,562 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-12 16:34:30,569 p=21 u=root n=ansible | TASK [ad_join : To permit a user access via SSH and console] *******************
2024-08-12 16:34:30,569 p=21 u=root n=ansible | Monday 12 August 2024  16:34:30 +0000 (0:00:00.253)       0:00:32.312 ********* 
2024-08-12 16:34:31,010 p=21 u=root n=ansible | changed: [databaserver-01]
2024-08-12 16:34:31,017 p=21 u=root n=ansible | TASK [ad_join : Update the default config] *************************************
2024-08-12 16:34:31,017 p=21 u=root n=ansible | Monday 12 August 2024  16:34:31 +0000 (0:00:00.448)       0:00:32.760 ********* 
2024-08-12 16:34:31,267 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-12 16:34:31,275 p=21 u=root n=ansible | TASK [ad_join : Check if sshd_config.d exist] **********************************
2024-08-12 16:34:31,276 p=21 u=root n=ansible | Monday 12 August 2024  16:34:31 +0000 (0:00:00.258)       0:00:33.018 ********* 
2024-08-12 16:34:31,643 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-12 16:34:31,651 p=21 u=root n=ansible | TASK [ad_join : Get list of config file] ***************************************
2024-08-12 16:34:31,652 p=21 u=root n=ansible | Monday 12 August 2024  16:34:31 +0000 (0:00:00.376)       0:00:33.395 ********* 
2024-08-12 16:34:31,667 p=21 u=root n=ansible | skipping: [databaserver-01]
2024-08-12 16:34:31,674 p=21 u=root n=ansible | TASK [ad_join : Override the default sshd config] ******************************
2024-08-12 16:34:31,674 p=21 u=root n=ansible | Monday 12 August 2024  16:34:31 +0000 (0:00:00.022)       0:00:33.417 ********* 
2024-08-12 16:34:31,693 p=21 u=root n=ansible | skipping: [databaserver-01] => (item=sshd_config) 
2024-08-12 16:34:31,705 p=21 u=root n=ansible | TASK [ad_join : Updating sudors for Domain Admins users] ***********************
2024-08-12 16:34:31,706 p=21 u=root n=ansible | Monday 12 August 2024  16:34:31 +0000 (0:00:00.031)       0:00:33.448 ********* 
2024-08-12 16:34:31,953 p=21 u=root n=ansible | ok: [databaserver-01]
2024-08-12 16:34:31,969 p=21 u=root n=ansible | PLAY RECAP *********************************************************************
2024-08-12 16:34:31,969 p=21 u=root n=ansible | databaserver-01            : ok=15   changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2024-08-12 16:34:31,970 p=21 u=root n=ansible | Monday 12 August 2024  16:34:31 +0000 (0:00:00.264)       0:00:33.713 ********* 
2024-08-12 16:34:31,970 p=21 u=root n=ansible | =============================================================================== 
2024-08-12 16:34:31,971 p=21 u=root n=ansible | ad_join : Installing Required packages --------------------------------- 28.82s
2024-08-12 16:34:31,972 p=21 u=root n=ansible | Gathering Facts --------------------------------------------------------- 1.28s
2024-08-12 16:34:31,972 p=21 u=root n=ansible | ad_join : To permit a user access via SSH and console ------------------- 0.45s
2024-08-12 16:34:31,973 p=21 u=root n=ansible | ad_join : Checking Domain Join status ----------------------------------- 0.42s
2024-08-12 16:34:31,973 p=21 u=root n=ansible | ad_join : Modify access_provider line ----------------------------------- 0.39s
2024-08-12 16:34:31,974 p=21 u=root n=ansible | ad_join : Check if sshd_config.d exist ---------------------------------- 0.38s
2024-08-12 16:34:31,974 p=21 u=root n=ansible | ad_join : Join system --------------------------------------------------- 0.28s
2024-08-12 16:34:31,975 p=21 u=root n=ansible | ad_join : Updating sudors for Domain Admins users ----------------------- 0.26s
2024-08-12 16:34:31,976 p=21 u=root n=ansible | ad_join : Update the default config ------------------------------------- 0.26s
2024-08-12 16:34:31,976 p=21 u=root n=ansible | ad_join : Add fallback_homedir ------------------------------------------ 0.26s
2024-08-12 16:34:31,977 p=21 u=root n=ansible | ad_join : Add ad_gpo_access_control line to SSSD config ----------------- 0.25s
2024-08-12 16:34:31,977 p=21 u=root n=ansible | ad_join : Add simple_allow_groups line ---------------------------------- 0.25s
2024-08-12 16:34:31,978 p=21 u=root n=ansible | ad_join : Add use_fully_qualified_names line ---------------------------- 0.25s
2024-08-12 16:34:31,978 p=21 u=root n=ansible | ad_join : Override the default sshd config ------------------------------ 0.03s
2024-08-12 16:34:31,979 p=21 u=root n=ansible | ad_join : Debug the AD status ------------------------------------------- 0.03s
2024-08-12 16:34:31,979 p=21 u=root n=ansible | ad_join : Display success message --------------------------------------- 0.03s
2024-08-12 16:34:31,980 p=21 u=root n=ansible | ad_join : Display error message ----------------------------------------- 0.03s
2024-08-12 16:34:31,981 p=21 u=root n=ansible | ad_join : Get list of config file --------------------------------------- 0.02s
